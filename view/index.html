<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comfy Couches</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

	<style>
        html{
	    	overflow: hidden;
            margin:0;
            height:100%; 
        }

		body {
			overflow: auto;
			margin: 0;
			height: 100%;
			background-color: #9db5d2;

		}

		h1 {
			font-family: Tahoma, serif;
			color: white;
			font-size: 2em;
		}

		h2 {
			font-family: Tahoma, serif;
			color: white;
		}

		h3 {
			font-family: Tahoma, serif;
			color: white;
			}

		h4 {
			font-family: Tahoma, serif;
			color: white;
			margin: 0;
			padding: 0;
		}

		h5 {
			font-family: Tahoma, serif;
			color:white;
			margin: 0;
			padding: 0;
		}

		p {
			font-family: Tahoma, serif;
		}

		#music-button {
			filter: invert(1);
			width: 2em;
			border: 2px solid #000000;
			border-radius: 50%;
		}

		#music-button:hover {
			filter: invert(0);
			border: 2px solid #FFFFFF;
			cursor: pointer;
		}

		.select-button {
			filter: invert(1);
			cursor:pointer;
			width: 2.5em;
			border-radius: 10px;
		}

		.select-button:hover {
			filter: invert(0);
			background-color: white;
		}

		#up-arrow-song-display {
			filter: invert(1);
			width: 3em;
			border-radius: 50%;
		}

		#up-arrow-song-display:hover{
			background-color: #FFFFFF;
			cursor: pointer;
			filter: invert(0);
			border: 2px solid #FFFFFF;
		}

		#nav-bar {
			align-items: center;
			position: fixed;
			display: flex;
			margin-left: 2em;
			top: 0;
			width: 100vw;
			padding:0;
		}

		#nav-bar-back-button {
			width: 3em;
			filter: invert(1);
			border-radius: 50%;
		}

		#nav-bar-back-button:hover{
			filter: invert(0);
			background-color: #FFFFFF;
			cursor: pointer;
		}

		.nav-bar-button {
			padding: 0.5em;
			background-color: #FFFFFF;
			color: black;
			cursor: pointer;
			border: 2px solid #FFFFFF;
			border-radius: 10px;
		}

		.nav-bar-button:hover{
			background-color: #000000;
			color: white;
			cursor: pointer;
			border: 2px solid #000000;
			border-radius: 10px;
		}

		#song-display {
			width: 100vw; /* Adjust the width of the sidebar as needed */
			justify-content: center;
			position: fixed;
			top: 0;
			right: 0;
			height: 100%;
			background-color: #000000; /* Your desired background color */
			display: flex;
			color: white;
			z-index: 99;
		}

		#player-bar {
			align-items: center;
			justify-content: space-around; /* Use space-around for even spacing */
			position: fixed;
			bottom: 0;
			padding: 2em;
			background-color: #000000;
			width: 100%;
			height: 2em;
			display: flex;
			z-index: 100;
		}

		.player-bar-column {
			flex: 1; /* Let each column take up equal space */
			display: flex;
			align-items: center;
			justify-content: center; /* Center content horizontally and vertically */
		}

		#player-bar-text-holder {
			margin-left: 1em;
			align-items: center;
		}

		#player-bar-title {
			font-size: 2.2vh;
			margin-bottom: 4px;
		}

		#player-bar-artist {
			font-size: 1.2vh;
		}

		#player-bar-artist:hover {
			text-decoration: underline;
			cursor: pointer;
		}

		#player-bar-controls {
			align-content: center;
		}

		#player-bar-song-info{
		}

		#album-content {
			width: 100vw;
			background-color:#E8F8F5;
			height: 100%
		}

		div.album-tag {
			width: 40vw;
			padding: 2em;
			background-color: #6a7c8f;
			border-radius: 10px;
			margin: 2em;
			display: flex;
			align-items: center;
			flex-direction: row;
		}

		div.album-tag:hover {
			background-color: #334046;
			border-radius: 10px;
			cursor: pointer;
		}

		div.artist-album-info {

		}

		img.artist-view-album {
			width: 16em;
			padding: 2em;
			margin-left: 2em;
			border-radius: 3em;
		}

		div.all-artists-container {
			display: flex;
			flex-wrap: wrap; /* Allow content to wrap to a new row */
			justify-content: flex-start; /* Align content to the left */
			align-items: center;
		}


		div.artist-tag {
			display: flex;
			width: 18em;
			height: 22em;
			justify-content: center;
			align-items: center;
			flex-direction: column;
			background-color: #6a7c8f;
			border-radius: 10px;
		}

		div.artist-tag:hover {
			display: flex;
			width: 18em;
			height: 22em;
			justify-content: center;
			align-items: center;
			flex-direction: column;
			background-color: #334046;
			border-radius: 10px;
			cursor: pointer;
		}

		div.artist-container {
			padding:1em;
		}

		img.artist-picture {
			height: 250px;
			width: 250px;
			border-radius: 50%;
			overflow: hidden;
			display: flex;
			justify-content: center;
			align-items: center;
			padding: 1em;
		}

		#tag-container {
			margin: 2em;
			display: flex;
			justify-content: center;
			flex-direction: column;
			align-items: center;
			border-radius: 3em;
			background-color: #6a7c8f;
		}

		.song-tag {
			width: 50%;
			max-width: 50vw;
			display: flex;
			justify-content: space-between;
			align-items: center;
			color: white;
			margin-top: 1em;
			border-bottom: 2px solid #FFFFFF;
		}

		.song-tag-left {
			width: 80vw;
			display: flex;
			cursor: pointer;
			margin-left: 2em;
			justify-content: flex-start;
		}

		.song-tag-left:hover {
			background-color: #CEE5FF;
		}

		.song-tag-right {
			width: 10vw;
			display: flex;
			justify-content: center;
		}

		.song-tag-right:hover {
			background-color: #CEE5FF;
			cursor: pointer;
		}

		#content {
			width: 100vw;
			height: 100vh;
			overflow: auto;
			margin-top: 4em;
			display: flex;
		}

		#song-display-cover {
			margin-top: 5em;
			backdrop-filter: blur(30px) saturate(3);
		}

		#player-bar-cover {
			width: 6vh;
			border-radius: 2px;
		}

		#player-bar-title {
		}

		#container-info {
			margin-top: 5vh;
			align-items: center;
			position: fixed;
			display: flex;
			flex: 1;
			width: 33vw;
			height: 100vh; /* Adjust height as needed */
			flex-direction: column;
		}

		#container-info-padding-div {
			width: 25em;
			height: 35em;
			display: flex;
			justify-content: center;
			flex-direction: column;
			align-items: center;
			border-radius: 3em;
			background-color: #6a7c8f;
		}

		#container-info-cover {
			height: 30vh;
			border-radius: 2em;
		}

		#item-container {
			display: flex;
			overflow-y:auto;
			overflow-x: hidden;
			padding: 1em;
			margin-left: 2vw;
			margin-right: 2vw;
			margin-bottom: 8vh;
			width: 100vw;
			height: 80vh;
			flex-direction: column; /* Set flex direction to column */
			justify-content: flex-start;
			align-items: center;
			position: fixed;
		}

		#container-info-text {
			display: flex;
			margin-left: 2em;
		}

		#container-info-text1 {
			color: white;
			font-family: Arial, serif;
			margin: 0; /* Remove default margin */
		}

		#container-info-text2 {
			color: white;
			font-family: Arial, serif;
			margin: 0; /* Remove default margin */
		}

		.track-num-text {
			font-family: Tahoma, serif;
			color: gray;
		}

		#progress-bar-holder {
			display: flex;
			flex-direction: column;
		}

  </style>


</head>
<body>

	<div id="nav-bar">
		<img id="nav-bar-back-button" onclick="navigate_back()" src="http://localhost:8080/images/BackButton.png"></img>
	        <a onclick="get_artists()">
			<h3 id="artist-populate" class="nav-bar-button"> ARTISTS </h3>
		</a>

		<a onclick="get_playlists()">
			<h3 id="playlist-populate" class="nav-bar-button"> PLAYLISTS </h3>
		</a>

		<a onclick="get_albums()">
			<h3 id="get-albums" class="nav-bar-button"> ALBUMS </h3>
		</a>

	</div>

	<div id="player-bar">

		<div class="player-bar-column" style="margin-left: 3em; display: flex; justify-content: flex-start">
			<img src="http://localhost:8080/Music/Music/Blood%20Orange/Negro%20Swan/cover.jpg" id="player-bar-cover" alt="album-cover"/>
			<div id="player-bar-text-holder">
				<h4 id="player-bar-title">For Free?</h4>
				<h5 id="player-bar-artist" onclick="click_artist_playerview()">BLOOD ORANGE</h5>
			</div>
		</div>
		
		<div class="player-bar-column" style="justify-content: center">
			<div id="progress-bar-holder">

				<div class="player-bar-column">
					<img class="select-button" id="last-song-button" src="http://localhost:8080/images/ReverseButton.png" onclick="play_last_song()"></img>
					<img id="music-button" src="http://localhost:8080/images/PlayButton.png" onclick="toggle_music()"></img>
					<div class="audio-wrapper" id="player-container" href="javascript:;">
						<audio id="audio" src="http://localhost:8080/Music/Music/Blood%20Orange/Negro%20Swan/02%20Saint.mp3" type="audio/mpeg" ontimeupdate="initProgressBar()"> </audio>
					</div>
					<img class="select-button" src="http://localhost:8080/images/SkipButton.png" onclick="skip_song()"></img>
				</div>
				<div>
					<div class="player-controls scrubber">
						<span id="seek-obj-container">
							<progress id="seek-obj" value="0" max="1"></progress>
						</span>
						<small style="float: left; position: relative; left: 15px;" id="start-time"></small>
						<small style="float: right; position: relative; right: 20px;" id="end-time"></small>
					</div>
				</div>
			</div>
		</div>

		<div class="player-bar-column" style="justify-content: right; margin-right: 3em;">
			<img onclick="show_full_song()" id="up-arrow-song-display" src="http://localhost:8080/images/UpArrow.png">
		</div>
        </div>

        <div id="song-display" style="visibility: hidden">
		<div>
			<div id="image-display-parent"> 
				<img width="400vw" id="song-display-cover" src=""></img>
			</div>
				<h2 id="song-display-song-name" style="color: white;"> SILLY SONG </h2>
				<h3 id="song-display-artist-name" style="color:white; "> SILLY ARTIST </h3>
		</div>

		<button onclick="hide_music_display()">X</button>
        </div>

        <div id="content">
			<div id="container-info" style="visibility: hidden">
				<div id="container-info-padding-div">
					<img id="container-info-cover" src="http://localhost:8080/Music/Music/100%20gecs/10%2C000%20gecs/cover.jpg"></img>
					<h1 id="container-info-text1"></h1>
					<h2 id="container-info-text2"></h2>
				</div>
		</div>	 
		<div id="item-container">
		</div>
			
	</div>

        <script>

			window.onload = function() {
				// Code to run when the page is loaded
				progressBar = document.getElementById('seek-obj');
				progressBar.style.backgroundColor = '#FFFFFF';
				progressBar.style.borderRadius = '10px'
				progressBar.style.overflow = 'hidden';
				progressBar.style.border = "2px solid white";
				progressBar.style.marginTop = "1em";
				progressBar.style.width = "30vw";

			};
            function hide_music_display() {
                document.getElementById("song-display").style.visibility = "hidden";
                document.getElementById("content").style.width = "100vw";
            }

			function get_artists() {
				pywebview.api.get_artists()
			}

			function get_playlists() {
				pywebview.api.populate_available_playlists()
			}

			function get_albums() {
				pywebview.api.get_albums()
			}
            function populate_playlist(playlist_content_json) {
                pywebview.api.populate_playlist(playlist_content_json)
            }

            function populate_artist_work(url) {
                pywebview.api.populate_artist_work(url)
			}

            function populate_songs_from_album(url) {
                pywebview.api.populate_songs_from_album(url)
            }

            function navigate_back() {
                pywebview.api.navigate_back()
	    	}

			function click_artist_playerview(){
				let audioElement = document.getElementById('audio');
				let audioSrc = audioElement.src;

				let audioSplit = audioSrc.split("/");

				audioSplit = audioSplit[audioSplit.length - 3];

				populate_artist_work(audioSplit)
			}

			function play_song_from_click(url){
				let audioElement = document.getElementById("audio");
				document.getElementById("content").style.width =  "100vw";

				audioElement.addEventListener("ended", function(){
					play_next_song();
				});
				pywebview.api.play_song_from_click(url)
			}

            function toggle_music() {
                pywebview.api.toggle_music()
	    	}

            function show_full_song() {
                document.getElementById('song-display').style.visibility = "visible";
            }

            function add_to_queue(url) {
	        	pywebview.api.add_to_queue(url)
	    	}

            function play_next_song() {
	        	pywebview.api.play_next_song()
	    	}

			function play_last_song() {
				pywebview.api.play_last_song()
			}

			function skip_song() {
				pywebview.api.skip_song()
			}

			function create_new_playlist() {
				pywebview.api.create_new_playlist()
			}

			function initProgressBar() {
				var player = document.getElementById('audio');

				var progressbar = document.getElementById('seek-obj');
				progressbar.value = (player.currentTime / player.duration);
				progressbar.addEventListener("click", seek);

				function seek(event) {
					var percent = event.offsetX / this.offsetWidth;
					player.currentTime = percent * player.duration;
					progressbar.value = percent / 100;
				}
			}

	</script>
</body>
</html>
